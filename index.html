<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Docker從入門到入迷</title>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">
    <!--Add support for earlier versions of Internet Explorer -->
    <!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>
    <!-- Wrap the entire slide show in a div using the "reveal" class. -->
    <div class="reveal">
        <!-- Wrap all slides in a single "slides" class -->
        <div class="slides">

            <!-- ALL SLIDES GO HERE -->
            <!-- Each section element contains an individual slide -->
            <section>
                <h1>Docker 從入門到入迷</h1>
            </section>
            <section>
                <h1>
                    <del>Docker 從入門到入魔&#x1f608;</del>
                </h1>
                <p>之魔鬼藏在細節裡</p>
            </section>
            <section>
                <section>
                    <h1>這裡會講到:</h1>
                    <h2>
                        <ul>
                            <li>Docker</li>
                            <li>Docker Compose</li>
                        </ul>
                    </h2>
                </section>
                <section>
                    <h1>不會講到:</h1>
                    <h3>
                        <ul>
                            <li><a href="http://kubernetes.io/">Kubernates</a></li>
                            <li><a href="http://mesos.apache.org/">Mesos</a></li>
                        </ul>
                    </h3>
                    <p>以及其他很複雜但除範例之外<br/>不知道怎麼跑起來的方案&#x1f60f;</p>
                </section>
            </section>
            <section>
                <section>
                    <p>大家都說<b style="font-size:200%">容器化</b>是未來趨勢...</p>
                </section>
                <section>
                    <p>但我們只有一堆Copy & Paste的Server端<b style="font-size:200%">舊程式</b>...</p>
                </section>
                <section>
                    <p>要用怎樣的方法來最小幅度<b style="font-size:200%">改造</b>舊程式， 以便能夠用
                        <b><a href="https://github.com/docker/docker">Docker</a></b> + <b><a href="https://github.com/docker/compose">Docker Compose</a></b>的組合，
                        配合內部架設
                        <b><a href="https://github.com/docker/distribution">Docker影像庫</a></b>來做開發時期的維護及營運時期的運行。</p>
                </section>
            </section>
            <section>
                <section>
                    <p>首先來說為何要<b style="font-size:150%">容器化</b>...</p>
                </section>
                <section>
                    <img src="./pic/game_DAU.jpg" />
                    <small class="caption">
                        來源：<a href="http://blog.gameanalytics.com/blog/what-analysing-400-games-taught-us.html">http://blog.gameanalytics.com/blog/what-analysing-400-games-taught-us.html</a>
                    </small>
                    <p class="fragment fade-up" style="font-size:120%">從正式上線營運開始後三星期到一個月之間是<br/>關鍵<span style="font-size:120%">&#x1f4b0;</span>觀察期</p>
                </section>
                <section>
                    <h2>
                        流量特性：
                    </h2>
                    <h3>
                        <ul>
                            <li class="fragment fade-up" data-fragment-index="1">一開始會有暴衝流量(衝首發)</li>
                            <li class="fragment fade-up" data-fragment-index="2">如果紅了還會繼續暴衝(病毒式傳播)</li>
                            <li class="fragment fade-up" data-fragment-index="3">如果不紅就會掉得很快(該撤收了)</li>
                            <li class="fragment fade-up" data-fragment-index="4">
                                真的不紅主動減少維護人力硬體等的開銷<br/><small class="fragment fade-up" data-fragment-index="5">(自動營運)</small>
                            </li>
                        </ul>
                    </h3>
                    <h3 class="fragment fade-up" data-fragment-index="6">如何根據實際情況有效配置硬體資源讓營運成本降低？</h3>
                </section>
                <section>
                    <h1>
                        讓伺服器配置有彈性
                    </h1>
                    <h3>
                        <ul>
                            <li class="fragment fade-up">安裝佈署的方法要很容易&自動化</li>
                            <li class="fragment fade-up">遷移到更↑或↓配置的硬體流程簡易&快</li>
                            <li class="fragment fade-up"><br/>
                                <del style="font-weight: lighter">最好還不用多花錢&#x1f4b8;
                                    <del>
                            </li>
                        </ul>
                    </h3>
                </section>
                <section>
                    <h2>
                        Game Table
                    </h2>
                    <h3>
                        <ul>
                            <li class="fragment fade-up" data-fragment-index="1">遊戲系統中佔很大部分的設定檔</li>
                            <li class="fragment fade-up" data-fragment-index="2">遊戲商業邏輯的核心資料</li>
                            <li class="fragment fade-up" data-fragment-index="3">至少一半bug是這類資料沒設定正確導致</li>
                            <li class="fragment fade-up" data-fragment-index="4">要有辦法能在發現錯誤之後快速回溯上個版本重新佈署
                                <small class="fragment fade-up" data-fragment-index="5">(退版)</small></li>
                        </ul>
                    </h3>
                </section>
                <section>
                    <h1>使用Docker做容器化</h1>
                    <ul>
                        <li class="fragment fade-up" data-fragment-index="1">伺服器的部署方法完全一致統一化</li>
                        <li class="fragment fade-up" data-fragment-index="2">多個服務要(縮減規模)同時部署在單台硬體上較簡單
                            <div class="fragment fade-up" data-fragment-index="3">(port mapping且容器內的程式不需改設定)</div>
                        </li>
                        <li class="fragment fade-up" data-fragment-index="4">萬一要退版，藉由Docker的
                            <a href="https://docs.docker.com/v1.5/terms/layer/#union-file-system">Union File System</a> 特性可快速退回先前的狀態來回溯服務狀態
                        </li>
                    </ul>
                </section>
            </section>
            <section>
                <section>
                    <h2>Docker<br/>(docker-engine)<br/>是什麼</h2>
                    <ul>
                        <li class="fragment fade-up" data-fragment-index="1">Light Weight VM?
                            <div style="font-size:80%" class="fragment fade-up" data-fragment-index="2">
                                <a href="https://blog.docker.com/2016/03/containers-are-not-vms/">Containers are not VMs</a></div>
                        </li>
                        <li class="fragment fade-up" data-fragment-index="3">Runtime?</li>
                        <li class="fragment fade-up" data-fragment-index="4">Sandbox?</li>
                        <li class="fragment fade-up" data-fragment-index="5">Transport Package Format?</li>
                    </ul>
                    <img class="fragment fade-up" data-fragment-index="6" style="display: block; margin: auto; position: absolute; top: 0px;"
                        width="100%" data-src="./pic/ElephantBlindmen.png" />
                </section>
                <section>
                    <h2>Docker<br/>(docker-engine)<br/>是什麼</h2>
                    <h3 class="fragment fade-up" data-fragment-index="1">不管它是什麼，要做的就是：</h3>
                    <ol>
                        <li class="fragment fade-up" data-fragment-index="2">將應用程式執行環境進行<b>包裝</b>產生可佈署的『image』</li>
                        <li class="fragment fade-up" data-fragment-index="3">『image』藉由一些步驟儲存、導入到目標端機器的docker上</li>
                        <li class="fragment fade-up" data-fragment-index="4">『image』在目標端的docker上拆包、啟動，執行該應用</li>
                    </ol>
                </section>
                <section>
                    <h3>幾個概念</h3>
                    <div style="display: table; width:100%; overflow:hidden;">
                        <div style="display: table-cell; vertical-align: middle;">
                            <img style="display: block; margin: 0px;" data-src="./pic/engine-components-flow.png" /><br/>
                            <small>來源：<a href="https://docs.docker.com/engine/understanding-docker/#/what-is-docker-engine">官網docker-engine</a></small>
                        </div>
                        <div style="display: table-cell; margin-left: 20px; vertical-align: middle; float:right">
                            <ol>
                                <li class="fragment fade-up" data-fragment-index="1">client-server架構</li>
                                <li class="fragment fade-up" data-fragment-index="2">Running Container<small>(run time)</small><br/>
                                    <span class="fragment fade-up" data-fragment-index="3"><small>v.s.</small>
                                        <span/><br/>
                                        <span class="fragment fade-up" data-fragment-index="4">Fixed Image
                                        <small>(build time)</small></span></li>
                                <li class="fragment fade-up" data-fragment-index="5">Union File System分層構造<br/>
                                    <span class="fragment fade-up" data-fragment-index="6">
                                        <small>(for static data & code or exe)</small></span></li>
                                <li class="fragment fade-up" data-fragment-index="7"><a href="https://docs.docker.com/engine/tutorials/dockervolumes/">Volume</a> for state data<br/>
                                    <ul style="font-size: 80%">
                                        <li class="fragment fade-up" data-fragment-index="8">多個容器可以共享單一volume</li>
                                        <li class="fragment fade-up" data-fragment-index="9">容器的volume可以對應到實體機器FS位置</li>
                                        <li class="fragment fade-up" data-fragment-index="10">image產生時可以定義內部路徑位置的volme，並由另一個容器啟動時使用
                                            <br/>(<a href="https://docs.docker.com/engine/reference/run/#/volume-shared-filesystems">--volumes-from=""</a>)</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                    </div>
                </section>
                <section>
                    <h2>Docker Compose<br/>是什麼</h2>
                    <ul>
                        <li class="fragment fade-up" data-fragment-index="1">
                            docker的client端操作單用指令列打命令落落長
                        </li>
                        <li class="fragment fade-up" data-fragment-index="2">運作環境的配置通常不會只有單一個容器</li>
                        <li class="fragment fade-up" data-fragment-index="3">動態的環境變數&設定檔對應</li>
                    </ul>
                </section>
            </section>

        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
		// Required, even if empty.
		Reveal.initialize({
		});
	</script>
</body>

</html>